Version 4
SHEET 1 880 680

WIRE  96  64   96  16
WIRE 224  64  224  16
WIRE 160 160  160 112
WIRE  96 256   96 208
WIRE 224 256  224 208
WIRE 160 320  160 272
WIRE  96 384   96 320
WIRE 224 384  224 320
WIRE 160 448  160 400
WIRE 320 256  224 256
WIRE 320 384  224 384
WIRE  16 256   96 256
WIRE  16 384   96 384
WIRE 160  16  224  16
WIRE 160  16   96  16

FLAG 0 0 0
FLAG 160 16 Vdd

SYMBOL voltage 160  -16 R0
SYMATTR InstName V1
SYMATTR Value 5

SYMATTR Value2 AC 0
SYMATTR SpiceLine Vdd 0 5

SYMBOL pmos  64 112 R180
SYMATTR InstName M1
SYMATTR Value PMOS1
SYMATTR L 300n
SYMATTR W 600n

SYMBOL pmos 192 112 R180
SYMATTR InstName M2
SYMATTR Value PMOS1
SYMATTR L 300n
SYMATTR W 600n

SYMBOL current 160 240 R270
SYMATTR InstName I1
SYMATTR Value 50u

SYMBOL nmos  64 320 R0
SYMATTR InstName M3
SYMATTR Value NMOS1
SYMATTR L 300n
SYMATTR W 600n
SYMATTR SpiceLine2 ; diode-connected: gate=drain at left node via wiring

SYMBOL nmos 192 320 R0
SYMATTR InstName M4
SYMATTR Value NMOS1
SYMATTR L 300n
SYMATTR W 600n

SYMBOL cap 320 240 R0
SYMATTR InstName C1
SYMATTR Value 4.4p

SYMBOL cap  16 240 R0
SYMATTR InstName C2
SYMATTR Value 20p

SYMBOL current  16 352 R270
SYMATTR InstName I2
SYMATTR Value 139u

SYMBOL voltage 320 368 R0
SYMATTR InstName V2
SYMATTR Value 1

TEXT 400 64 Left 2 !; === Node labels ===
TEXT 400 88 Left 2 ; PMOS pair drains: left node N001, right node Vo+p
TEXT 400 112 Left 2 ; Tail node: N002

SYMBOL label  96  64 R0
SYMATTR Text N001
SYMBOL label 224  64 R0
SYMATTR Text Vo+p
SYMBOL label 160 160 R0
SYMATTR Text N002

SYMBOL label  96 256 R0
SYMATTR Text N001
SYMBOL label 224 256 R0
SYMATTR Text Vo+p

SYMBOL label 320 256 R0
SYMATTR Text Vin-

SYMBOL label  16 256 R0
SYMATTR Text Vin-

SYMBOL label 320 384 R0
SYMATTR Text Vin+

SYMBOL label  16 384 R0
SYMATTR Text Vin-

TEXT 400 176 Left 2 !; === Connections / notes ===
TEXT 400 200 Left 2 ; M1 drain -> N001, gate -> Vin-, source/bulk -> Vdd
TEXT 400 224 Left 2 ; M2 drain -> Vo+p, gate -> Vin+, source/bulk -> Vdd
TEXT 400 248 Left 2 ; I1 from Vdd to N002 (tail source)
TEXT 400 272 Left 2 ; Bottom NMOS mirror: M3 diode at N001 (gate=drain via wire), M4 gate tied to N001, drain at Vo+p, sources at 0
TEXT 400 296 Left 2 ; C1 from Vin- to Vo+p, C2 from Vin- to 0, I2 sinks DC at Vin-
TEXT 400 320 Left 2 ; V2 drives Vin+ (DC sweep below)
TEXT 400 344 Left 2 ; Ensure wires match labels if you rearrange visually

TEXT 48 520 Left 2 !.dc V2 0 5 0.01
TEXT 48 544 Left 2 !.lib C:\\Users\\ilike\\AppData\\Local\\LTspice\\lib\\cmp\\standard.mos
TEXT 48 568 Left 2 !.model NMOS NMOS
TEXT 48 592 Left 2 !.model PMOS PMOS
TEXT 48 616 Left 2 !.model NMOS1 NMOS (LEVEL=1 VTO=0.6  KP=200u LAMBDA=0.02)
TEXT 48 640 Left 2 !.model PMOS1 PMOS (LEVEL=1 VTO=-0.6 KP=100u LAMBDA=0.02)

